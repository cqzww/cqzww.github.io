(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d237e94"],{fcab:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("a-form",{attrs:{layout:"horizontal"}},[o("div",{staticStyle:{"padding-top":"10px"}},[o("a-row",[o("a-col",[o("span",{staticStyle:{float:"left","margin-top":"3px"}},[o("a-button",{style:{marginRight:"8px"},attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("添加")]),o("a-button",{style:{marginRight:"8px"},on:{click:function(t){return e.modelPublish()}}},[e._v("物模型发布")]),o("a-button",{on:{click:function(t){return e.viewModelTsl()}}},[e._v("查看物模型")])],1)]),o("a-col",{attrs:{md:8,sm:24}},[o("a-form-item",{attrs:{label:"功能类型",labelCol:{span:5},wrapperCol:{span:15,offset:1}}},[o("a-select",{attrs:{placeholder:"请选择"},model:{value:e.form.funcType,callback:function(t){e.$set(e.form,"funcType",t)},expression:"form.funcType"}},[e._l(e.CollectionData("PARAMTYPE"),(function(t,a){return[o("a-select-option",{key:a,attrs:{value:t.value}},[e._v(e._s(t.label))])]}))],2)],1)],1),o("a-col",{attrs:{md:8,sm:24}},[o("a-form-item",{attrs:{label:"功能名称",labelCol:{span:5},wrapperCol:{span:15,offset:1}}},[o("a-input",{attrs:{placeholder:"请输入",allowClear:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.queryFunc()}},model:{value:e.form.funcName,callback:function(t){e.$set(e.form,"funcName",t)},expression:"form.funcName"}})],1)],1),o("a-col",[o("span",{staticStyle:{float:"left","margin-top":"3px"}},[o("a-button",{style:{marginRight:"8px"},attrs:{type:"primary"},on:{click:function(t){return e.queryFunc()}}},[e._v("查询")]),o("a-button",{style:{marginRight:"8px"},on:{click:function(t){return e.resetForm()}}},[e._v("重置")])],1)])],1)],1)]),o("a-table",{attrs:{rowKey:function(e){return e.id},columns:e.dataColumns,dataSource:e.dataSource,pagination:!1},scopedSlots:e._u([{key:"funcType",fn:function(t){return o("span",{},[e._v(" "+e._s(e.CollectionLabel("PARAMTYPE",t))+" ")])}},{key:"dataType",fn:function(t){return o("span",{},[e._v(" "+e._s(e.CollectionLabel("PARAMDATATYPE",t))+" ")])}},{key:"action",fn:function(t,a){return[o("div",{staticClass:"editable-row-operations"},[o("a",{style:{marginRight:"8px"},on:{click:function(){return e.view(a)}}},[e._v("查看")]),o("a",{style:{marginRight:"8px"},on:{click:function(){return e.edit(a)}}},[e._v("编辑")]),o("a-popconfirm",{attrs:{title:"是否确定删除该记录？","ok-text":"确定","cancel-text":"取消"},on:{confirm:function(t){return e.deleteRecord(a)}}},[o("a",{attrs:{href:"#"}},[e._v("删除")])])],1)]}}])}),o("a-pagination",{ref:"gridPager",staticStyle:{float:"right","margin-top":"10px"},attrs:{"show-total":function(e){return"总数："+e+" 条"},showSizeChanger:"",showQuickJumper:"",total:e.total,defaultPageSize:10,current:e.pageNumber},on:{change:e.changePage}}),e.showModel?o("a-modal",{attrs:{title:"发布物模型",width:800,visible:e.showModel,okText:"发布"},on:{ok:e.okPublish,cancel:e.cancelPublish}},[o("model-edit",{ref:"editForm",attrs:{editJson:e.editJson},on:{saveModel:e.saveModel}})],1):e._e(),e.showView?o("a-modal",{attrs:{title:"查看物模型",width:800,visible:e.showView,"ok-button-props":{style:{display:"none"}}},on:{cancel:e.cancelView}},[o("model-view",{ref:"viewForm",attrs:{viewJson:e.viewJson}})],1):e._e()],1)},n=[],r=o("dde5"),s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("a-card",[o("pre",[o("code",{attrs:{id:"json"}})])]),o("a-form",{attrs:{form:e.form,layout:"horizontal"}},[o("a-row",[o("a-col",{attrs:{span:16}},[o("a-form-item",{attrs:{label:"版本",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[o("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["version",{rules:[{required:!0,message:"请输入版本"}]}],expression:"[\n                      'version',\n                      { rules: [{ required: true, message: '请输入版本' }] },\n                      ]"}],attrs:{placeholder:"请输入"}})],1)],1)],1)],1)],1)},i=[],c={props:["editJson"],data:function(){return{form:this.$form.createForm(this,{}),formItemLayout:{labelCol:{span:6},wrapperCol:{span:10}},jsonStr:""}},mounted:function(){this.generateNewModel()},methods:{generateNewModel:function(){var e=this;r["d"].modelPublish({id:this.editJson.productId}).then((function(t){var o=t.data;if(o.serviceSuccess){var a=document.querySelector("#json");e.jsonStr=o.data.result.confJson;var n=JSON.parse(o.data.result.confJson);a.textContent=JSON.stringify(n,null,"  ")}}))},saveForm:function(){var e=this,t=this.form.getFieldsValue();t.id=null,t.productId=this.editJson.productId,t.confJson=this.jsonStr,this.form.validateFields((function(o){o||r["d"].saveModel(t).then((function(t){var o=t.data;console.log(o),o.serviceSuccess?(e.$message.success("发布成功"),e.$emit("saveModel")):e.$message.error("发布失败")}))}))}}},l=c,u=o("0c7c"),d=Object(u["a"])(l,s,i,!1,null,"8bc99bc2",null),p=d.exports,f=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("a-form",{attrs:{form:e.form,layout:"horizontal"}},[o("a-row",[o("a-col",{attrs:{span:16}},[o("a-form-item",{attrs:{label:"版本",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[o("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["version",{rules:[{required:!0,message:"请选择版本"}]}],expression:"[\n                'version',\n                {\n                  rules: [{ required: true, message: '请选择版本' }],\n                },\n              ]"}],attrs:{placeholder:"请选择版本再查看"},on:{change:e.changeVersion}},e._l(e.versionList,(function(t){return o("a-select-option",{key:t.id,attrs:{value:t.version}},[e._v(" "+e._s(t.version)+" ")])})),1)],1)],1)],1)],1),o("a-card",[o("pre",[o("code",{attrs:{id:"json"}})])])],1)},m=[],h=(o("4160"),o("159b"),{props:["viewJson"],data:function(){return{form:this.$form.createForm(this,{}),formItemLayout:{labelCol:{span:6},wrapperCol:{span:10}},versionList:[]}},mounted:function(){this.queryModel()},methods:{queryModel:function(){var e=this;r["d"].queryModel({productId:this.viewJson.productId}).then((function(t){var o=t.data;o.data.pageBean.list.forEach((function(t){e.versionList.push(t)}))}))},changeVersion:function(e){r["d"].queryModel({productId:this.viewJson.productId,version:e}).then((function(e){var t=e.data;if(t.serviceSuccess){var o=document.querySelector("#json"),a=JSON.parse(t.data.pageBean.list[0].confJson);o.textContent=JSON.stringify(a,null,"  ")}}))}}}),v=h,y=Object(u["a"])(v,f,m,!1,null,"3d1c90c4",null),g=y.exports,w=[{title:"功能类型",dataIndex:"funcType",key:"funcType",overflowTooltip:!0,scopedSlots:{customRender:"funcType"}},{title:"功能名称",dataIndex:"funcName",key:"funcName",overflowTooltip:!0},{title:"标识符",dataIndex:"funcTag",key:"funcTag",overflowTooltip:!0},{title:"数据类型",dataIndex:"dataType",scopedSlots:{customRender:"dataType"}},{title:"数据定义",dataIndex:"dataJson",scopedSlots:{customRender:"dataJson"}},{title:"操作",dataIndex:"action",align:"center",scopedSlots:{customRender:"action"}}],b={components:{modelEdit:p,modelView:g},props:["paramJson"],data:function(){return{form:{},dataSource:[],dataColumns:w,total:0,pageNumber:1,pageSize:10,showModel:!1,showView:!1,editJson:{},viewJson:{}}},mounted:function(){console.log(this.paramJson.productId),this.queryFunc()},methods:{changePage:function(e,t){this.pageNumber=e,this.pageSize=t,this.queryFunc()},resetForm:function(){this.form={},this.queryFunc()},queryFunc:function(){var e=this,t=this.form;t.productId=this.paramJson.productId,r["d"].queryProductFunc(t).then((function(t){var o=t.data;o.serviceSuccess&&(e.dataSource=o.data.pageBean.list,e.total=o.data.pageBean.total>0?o.data.pageBean.total:e.total)}))},deleteRecord:function(e){var t=this;r["d"].deleteProductFunc({id:e.id,delFlag:"1"}).then((function(e){var o=e.data;o.serviceSuccess?(t.$message.success("删除成功"),t.changePage(1,10)):t.$message.success("删除失败")}))},add:function(){this.$router.push({path:"/device/produceMg/prodFuncEdit",query:{editType:"1",proId:this.paramJson.productId}})},edit:function(e){this.$router.push({path:"/device/produceMg/prodFuncEdit",query:{editType:"2",proId:this.paramJson.productId,id:e.id}})},view:function(e){this.$router.push({path:"/device/produceMg/prodFuncInfo",query:{proId:this.paramJson.productId,id:e.id}})},importData:function(){},viewModelTsl:function(){this.showView=!0,this.viewJson.productId=this.paramJson.productId},modelPublish:function(){this.showModel=!0,this.editJson.productId=this.paramJson.productId},okPublish:function(){this.$refs.editForm.saveForm()},saveModel:function(){this.showModel=!1},cancelPublish:function(){this.showModel=!1},okView:function(){},cancelView:function(){this.showView=!1}}},J=b,k=Object(u["a"])(J,a,n,!1,null,null,null);t["default"]=k.exports}}]);