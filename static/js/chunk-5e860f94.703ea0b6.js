(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e860f94"],{"277e":function(e,t,a){},"4bbb":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-form",{attrs:{form:e.form,layout:"horizontal"}},[a("a-row",[a("a-col",{attrs:{span:16}},[a("a-form-item",{attrs:{label:"分组名",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["groupName",{rules:[{required:!0,message:"请输入分组名"}]}],expression:"[\n              'groupName',\n              { rules: [{ required: true, message: '请输入分组名' }] },\n            ]"}],attrs:{disabled:e.getlistLoading,"show-search":!0,"not-found-content":null,"show-arrow":!1,"filter-option":!0,autoClearSearchValue:!1},on:{search:e.handleSearch,blur:e.handleBlur,change:e.handleChange}},e._l(e.groupSource,(function(t){return a("a-select-option",{key:t.groupCode,attrs:{value:JSON.stringify(t)}},[e._v(" "+e._s(t.groupName))])})),1)],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:16}},[a("a-form-item",{attrs:{label:"分组编码",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["groupCode",{rules:[{required:!0,message:"请输入分组编码"}]}],expression:"[\n              'groupCode',\n              { rules: [{ required: true, message: '请输入分组编码' }] },\n            ]"}],attrs:{placeholder:"请输入"}})],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:16}},[a("a-form-item",{attrs:{label:"参数类型",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["paramType",{rules:[{required:!0,message:"请选择参数类型"}],initialValue:"21"}],expression:"[\n              'paramType',\n              {\n                rules: [{ required: true, message: '请选择参数类型' }],\n                initialValue: '21',\n              },\n            ]"}],attrs:{"button-style":"solid",placeholder:"请选择"}},[a("a-radio-button",{attrs:{value:"21"}},[e._v("驱动实例化参数")]),a("a-radio-button",{attrs:{value:"22"}},[e._v("子设备连接参数")])],1)],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:16}},[a("a-form-item",{attrs:{label:"参数名",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["paramName",{rules:[{required:!0,message:"请输入参数名"}]}],expression:"[\n              'paramName',\n              { rules: [{ required: true, message: '请输入参数名' }] },\n            ]"}],attrs:{placeholder:"请输入"}})],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:16}},[a("a-form-item",{attrs:{label:"标识符",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["paramTag",{rules:[{required:!0,message:"请输入标识符"}]}],expression:"[\n              'paramTag',\n              { rules: [{ required: true, message: '请输入标识符' }] },\n            ]"}],attrs:{placeholder:"请输入"}})],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:16}},[a("a-form-item",{attrs:{label:"数据类型",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["dataType",{rules:[{required:!0,message:"请选择数据类型"}]}],expression:"[\n              'dataType',\n              { rules: [{ required: true, message: '请选择数据类型' }] },\n            ]"}],attrs:{placeholder:"请选择"},on:{change:e.onTypeChange}},[e._l(e.CollectionData("PARAMDATATYPE"),(function(t,r){return[a("a-select-option",{key:r,attrs:{value:t.value}},[e._v(e._s(t.label))])]}))],2)],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showInt,expression:"showInt"}]},[a("a-row",[a("a-col",{attrs:{span:16}},[a("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"取值范围",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol,required:""}},[a("a-form-item",{style:{display:"inline-block",width:"calc(50% - 12px)"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["min",{rules:[{required:e.showInt,message:"取值范围不能为空"}]}],expression:"[\n                  'min',\n                  {\n                    rules: [\n                      { required: showInt, message: '取值范围不能为空' },\n                    ],\n                  },\n                ]"}],staticStyle:{width:"100%"},attrs:{placeholder:"请输入"}})],1),a("span",{style:{display:"inline-block",width:"24px",textAlign:"center"}},[e._v(" - ")]),a("a-form-item",{style:{display:"inline-block",width:"calc(50% - 12px)"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["max",{rules:[{required:e.showInt,message:"取值范围不能为空"}]}],expression:"[\n                  'max',\n                  {\n                    rules: [\n                      { required: showInt, message: '取值范围不能为空' },\n                    ],\n                  },\n                ]"}],staticStyle:{width:"100%"},attrs:{placeholder:"请输入"}})],1)],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:16}},[a("a-form-item",{attrs:{label:"步长",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["step",{rules:[{required:e.showInt,message:"步长不能为空"}]}],expression:"[\n                'step',\n                { rules: [{ required: showInt, message: '步长不能为空' }] },\n              ]"}],attrs:{placeholder:"请输入"}})],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:16}},[a("a-form-item",{attrs:{label:"单位",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["unit"],expression:"['unit']"}],attrs:{placeholder:"请选择单位"}},[e._l(e.CollectionData("PARAMUNIT"),(function(t,r){return[a("a-select-option",{key:r,attrs:{value:t.value}},[e._v(e._s(t.label))])]}))],2)],1)],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showEnum,expression:"showEnum"}]},[a("a-row",[a("a-col",{attrs:{span:16}},[a("a-form-item",{attrs:{label:"枚举型",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol,fieldDecoratorId:"enumDef",required:""}},[a("param-form",{ref:"param"})],1)],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showBool,expression:"showBool"}]},[a("a-row",[a("a-col",{attrs:{span:16}},[a("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"布尔值",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol,required:""}},[a("a-form-item",{style:{display:"inline-block",width:"calc(50% - 12px)"}},[a("label",{staticClass:"swi_label"},[e._v("0")]),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["falseValue",{rules:[{required:e.showBool,message:"布尔值不能为空"}]}],expression:"[\n                  'falseValue',\n                  {\n                    rules: [\n                      { required: showBool, message: '布尔值不能为空' },\n                    ],\n                  },\n                ]"}],staticStyle:{width:"70%"},attrs:{placeholder:"false"}})],1),a("span",{style:{display:"inline-block",width:"24px",textAlign:"center"}},[e._v(" - ")]),a("a-form-item",{style:{display:"inline-block",width:"calc(50% - 12px)"}},[a("label",{staticClass:"swi_label"},[e._v("1")]),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["trueValue",{rules:[{required:e.showBool,message:"布尔值不能为空"}]}],expression:"[\n                  'trueValue',\n                  {\n                    rules: [\n                      { required: showBool, message: '布尔值不能为空' },\n                    ],\n                  },\n                ]"}],staticStyle:{width:"70%"},attrs:{placeholder:"true"}})],1)],1)],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showText,expression:"showText"}]},[a("a-row",[a("a-col",{attrs:{span:16}},[a("a-form-item",{attrs:{label:"数据长度",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["length",{rules:[{required:e.showText,message:"请输入数据长度"}],initialValue:5e4}],expression:"[\n                'length',\n                {\n                  rules: [{ required: showText, message: '请输入数据长度' }],\n                  initialValue: 50000,\n                },\n              ]"}],staticStyle:{width:"70%",float:"left"},attrs:{placeholder:"请输入"}}),a("label",{staticClass:"swi_label",staticStyle:{"margin-top":"0px"}},[e._v("字符")])],1)],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showTime,expression:"showTime"}]},[a("a-row",[a("a-col",{attrs:{span:16}},[a("a-form-item",{attrs:{label:"时间格式",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["timestamp"],expression:"['timestamp']"}],attrs:{disabled:"",placeholder:"Long类型的UTC时间戳（毫秒）"}})],1)],1)],1)],1)],1)],1)},o=[],s=a("53ca"),l=a("d373"),i={components:{ParamForm:l["a"]},props:["paramJson","groups"],data:function(){return{form:this.$form.createForm(this,{}),formItemLayout:{labelCol:{span:6},wrapperCol:{span:18}},formItemLayoutWithOutLabel:{wrapperCol:{xs:{span:24,offset:0},sm:{span:20,offset:4}}},showInt:!1,showEnum:!1,showBool:!1,showText:!1,showTime:!1,type:"",rowData:{},groupSource:[],getlistLoading:!1}},mounted:function(){"2"===this.paramJson.editType&&this.viewParam(this.paramJson.row),this.groupSource=this.groups,console.log(this.groups)},methods:{handleSearch:function(e){this.handleChange(e)},handleChange:function(e){this.form.setFieldsValue({groupName:e})},handleBlur:function(e){if(this.isJSON(e)){var t=JSON.parse(e);this.form.setFieldsValue({groupName:t.groupName,groupCode:t.groupCode})}else this.form.setFieldsValue({groupName:e})},isJSON:function(e){if("string"==typeof e)try{var t=JSON.parse(e);return!("object"!=Object(s["a"])(t)||!t)}catch(a){return!1}},onTypeChange:function(e){"1"===e||"2"===e||"3"===e?(this.showInt=!0,this.showBool=!1,this.showEnum=!1,this.showText=!1,this.showTime=!1,this.type="1"):"4"===e?(this.showInt=!1,this.showEnum=!0,this.showBool=!1,this.showText=!1,this.showTime=!1,this.type="2"):"5"===e?(this.showBool=!0,this.showInt=!1,this.showEnum=!1,this.showText=!1,this.showTime=!1,this.type="3"):"6"===e?(this.showText=!0,this.showBool=!1,this.showInt=!1,this.showEnum=!1,this.showTime=!1,this.type="4"):"7"===e&&(this.showTime=!0,this.showText=!1,this.showBool=!1,this.showInt=!1,this.showEnum=!1,this.type="5")},saveForm:function(){var e=this,t=this.form.getFieldsValue();if("1"===this.type)t.dataJson='{"min":'+t.min+',"max":'+t.max+',"step":'+t.step+',"unit":"'+t.unit+'"}';else if("2"===this.type){for(var a=this.$refs.param.dataSource,r=[],o=0;o<a.length;o++){var s={};s.value=a[o].value,s.desc=a[o].desc,r.push(s)}t.dataJson='{"list":'+JSON.stringify(r)+"}"}else"3"===this.type?t.dataJson='{"falseValue":"'+t.falseValue+'","trueValue":"'+t.trueValue+'"}':"4"===this.type?t.dataJson='{"length":'+t.length+"}":"5"===this.type&&(t.dataJson="{}");console.log(t),this.form.validateFields((function(a){a||(e.rowData=t,e.reset(),e.$emit("saveSuccess"))}))},reset:function(){this.form.resetFields(),this.showInt=!1,this.showBool=!1,this.showEnum=!1,this.showText=!1,this.showTime=!1,this.type=""},viewParam:function(e){this.form.setFieldsValue(e);var t=JSON.parse(e.dataJson),a=e.dataType;"1"===a||"2"===a||"3"===a?(this.showInt=!0,this.type="1",this.form.setFieldsValue({min:t.min,max:t.max,step:t.step,unit:"undefined"==t.unit?"":t.unit})):"4"===a?(this.showEnum=!0,this.type="2",this.$refs.param.init(t.list)):"5"===a?(this.showBool=!0,this.type="3",this.form.setFieldsValue({falseValue:t.falseValue,trueValue:t.trueValue})):"6"===a?(this.showText=!0,this.type="4",this.form.setFieldsValue({length:t.length})):"7"===a&&(this.showTime=!0,this.type="5")}}},n=i,u=(a("871b"),a("0c7c")),m=Object(u["a"])(n,r,o,!1,null,"004883e3",null);t["a"]=m.exports},"871b":function(e,t,a){"use strict";var r=a("277e"),o=a.n(r);o.a},d373:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{attrs:{form:e.form}},[a("a-table",{attrs:{size:"small",columns:e.dataColumns,dataSource:e.dataSource,pagination:!1},scopedSlots:e._u([e._l(["value","desc"],(function(t){return{key:t,fn:function(r,o){return[a("a-input",{key:t,staticStyle:{margin:"-5px 0"},attrs:{size:"small",value:r},on:{change:function(a){return e.handleChange(a.target.value,o.key,t)}}})]}}})),{key:"operation",fn:function(t,r){return[a("span",[a("a",{attrs:{size:"small"},on:{click:function(t){return e.remove(r.key)}}},[e._v("删除")])])]}}],null,!0)}),a("a-button",{staticStyle:{color:"#1ABC9C"},attrs:{icon:"plus"},on:{click:e.newMember}},[e._v("添加参数")])],1)},o=[],s=(a("4de4"),a("d81d"),a("2909")),l=[{title:"参数值",dataIndex:"value",key:"参数值",overflowTooltip:!0,width:"30%",scopedSlots:{customRender:"value"}},{title:"参数描述",dataIndex:"desc",key:"参数描述",scopedSlots:{customRender:"desc"}},{title:"操作",key:"操作",scopedSlots:{customRender:"operation"}}],i=[],n={data:function(){return{columns:l,dataSource:i,form:this.$form.createForm(this)}},computed:{dataColumns:function(){return this.columns.map((function(e){return e.title=e.key,e}))}},methods:{newMember:function(){this.dataSource.push({key:this.dataSource.length+1,value:"",desc:""})},handleChange:function(e,t,a){var r=Object(s["a"])(this.dataSource),o=r.filter((function(e){return t===e.key}))[0];o&&(o[a]=e,this.dataSource=r)},remove:function(e){var t=this.dataSource.filter((function(t){return t.key!==e}));this.dataSource=t},init:function(e){if(this.dataSource=[],e.length>0)for(var t=0;t<e.length;t++)this.dataSource.push({key:this.dataSource.length+1,value:e[t].value,desc:e[t].desc})}}},u=n,m=a("0c7c"),h=Object(m["a"])(u,r,o,!1,null,"0141c012",null);t["a"]=h.exports}}]);