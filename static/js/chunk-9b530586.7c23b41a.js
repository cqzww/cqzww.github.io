(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9b530586"],{3822:function(e,a,t){},6014:function(e,a,t){"use strict";var o=t("3822"),r=t.n(o);r.a},b932:function(e,a,t){"use strict";t.r(a);var o=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("a-card",{attrs:{title:1==e.editType?"产品添加":"产品编辑"}},[t("a-form",{attrs:{form:e.form,layout:"horizontal"}},[t("a-row",[t("a-col",{attrs:{span:16}},[t("a-form-item",{attrs:{label:"产品名称",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["productName",{rules:[{required:!0,message:"请输入产品名称"}]}],expression:"[\n                'productName',\n                { rules: [{ required: true, message: '请输入产品名称' }] },\n              ]"}],attrs:{placeholder:"请输入"}})],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:16}},[t("a-form-item",{attrs:{label:"产品分组",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["productGroup",{rules:[{required:!0,message:"请选择产品分组"}]}],expression:"[\n                'productGroup',\n                { rules: [{ required: true, message: '请选择产品分组' }] },\n              ]"}],attrs:{placeholder:"请选择"}},[e._l(e.CollectionData("PRODUCTGROUP"),(function(a,o){return[t("a-select-option",{key:o,attrs:{value:a.value}},[e._v(e._s(a.label))])]}))],2)],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:16}},[t("a-form-item",{attrs:{label:"节点类型",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["nodeType",{rules:[{required:!0,message:"请选择节点类型"}],initialValue:"1"}],expression:"[\n                'nodeType',\n                { rules: [{ required: true, message: '请选择节点类型' }] ,initialValue: '1'},\n              ]"}],attrs:{"button-style":"solid"},on:{change:e.onNodeChange}},[e._l(e.CollectionData("NODETYPE"),(function(a,o){return[t("a-radio-button",{key:o,attrs:{value:a.value}},[e._v(e._s(a.label))])]}))],2)],1)],1)],1),t("a-row",{directives:[{name:"show",rawName:"v-show",value:e.showGate,expression:"showGate"}]},[t("a-col",{attrs:{span:16}},[t("a-form-item",{attrs:{label:"网关类型",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["gatewayType",{rules:[{required:e.showGate,message:"请选择网关类型"}]}],expression:"[\n                'gatewayType',\n                {\n                  rules: [{ required: showGate, message: '请选择网关类型' }],\n                },\n              ]"}]},[e._l(e.CollectionData("GATEWAYTYPE"),(function(a,o){return[t("a-radio",{key:o,attrs:{value:a.value}},[e._v(e._s(a.label))])]}))],2)],1)],1)],1),t("a-row",{directives:[{name:"show",rawName:"v-show",value:e.isSub,expression:"isSub"}]},[t("a-col",{attrs:{span:16}},[t("a-form-item",{attrs:{label:"连网方式",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["networkWay",{rules:[{required:e.isSub,message:"请选择连网方式"}]}],expression:"[\n                'networkWay',\n                { rules: [{ required: isSub, message: '请选择连网方式' }] },\n              ]"}],attrs:{placeholder:"请选择"}},[e._l(e.CollectionData("NETWORKWAY"),(function(a,o){return[t("a-select-option",{key:o,attrs:{value:a.value}},[e._v(e._s(a.label))])]}))],2)],1)],1)],1),t("a-row",{directives:[{name:"show",rawName:"v-show",value:e.isSub,expression:"isSub"}]},[t("a-col",{attrs:{span:16}},[t("a-form-item",{attrs:{label:"通讯协议",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["communicateProtocol",{rules:[{required:e.isSub,message:"请选择通讯协议"}]}],expression:"[\n                'communicateProtocol',\n                { rules: [{ required: isSub, message: '请选择通讯协议' }] },\n              ]"}]},[t("a-radio",{attrs:{value:"1"}},[e._v(" MQTT ")]),t("a-radio",{attrs:{value:"2",disabled:""}},[e._v(" CoAP ")]),t("a-radio",{attrs:{value:"3",disabled:""}},[e._v(" Http ")]),t("a-radio",{attrs:{value:"4",disabled:""}},[e._v(" TCP ")]),t("a-radio",{attrs:{value:"5",disabled:""}},[e._v(" MQ ")])],1)],1)],1)],1),t("a-row",{directives:[{name:"show",rawName:"v-show",value:e.isSub,expression:"isSub"}]},[t("a-col",{attrs:{span:16}},[t("a-form-item",{attrs:{label:"数据格式",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["dataformatType",{rules:[{required:e.isSub,message:"请选择数据格式"}]}],expression:"[\n                'dataformatType',\n                { rules: [{ required: isSub, message: '请选择数据格式' }] },\n              ]"}],on:{change:e.onFormatChange}},[t("a-radio",{attrs:{value:"1"}},[e._v(" 标准数据格式（tqLink JSON） ")]),t("a-radio",{attrs:{value:"2"}},[e._v(" 自定义 ")])],1)],1)],1)],1),t("a-row",{directives:[{name:"show",rawName:"v-show",value:e.showItem,expression:"showItem"}]},[t("a-col",{attrs:{span:16}},[t("a-form-item",{attrs:{label:e.dataItemName,labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["dataformatProtocolId",{rules:[{required:e.showItem,message:"请选择"}]}],expression:"[\n                'dataformatProtocolId',\n                { rules: [{ required: showItem, message: '请选择' }] },\n              ]"}],attrs:{placeholder:"请选择"}},e._l(e.subProtoList,(function(a){return t("a-select-option",{key:a.id,attrs:{value:a.id}},[e._v(" "+e._s(a.name)+" ")])})),1)],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:16}},[t("a-form-item",{attrs:{label:"启动/停用",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol,fieldDecoratorId:"enableFlag"}},[t("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["enableFlag",{initialValue:!0,valuePropName:"checked"}],expression:"[\n                'enableFlag',\n                { initialValue: true, valuePropName: 'checked' },\n              ]"}],attrs:{"default-checked":""},on:{change:e.onChange}})],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:16}},[t("a-form-item",{attrs:{label:"备注",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol,fieldDecoratorId:"description"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["description"],expression:"['description']"}],attrs:{rows:4,placeholder:"请输入"}})],1)],1)],1)],1),t("div",{staticStyle:{width:"30%",margin:"20px auto"}},[t("a-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:e.saveForm}},[e._v("提交")]),t("a-button",{staticClass:"btn",staticStyle:{"margin-left":"20px"},on:{click:e.resetForm}},[e._v("重置")])],1)],1),t("a-modal",{attrs:{title:"分组编辑",width:800,visible:e.showGroupEdit,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("template",{slot:"footer"},[t("a-button",{on:{click:e.handleCancel}},[e._v("关闭")])],1),t("pro-group-edit")],2)],1)},r=[],l=(t("a9e3"),function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("a-button",{attrs:{type:"primary"},on:{click:e.newMember}},[e._v("添加分组")]),t("a-table",{attrs:{columns:e.columns,dataSource:e.dataSource,pagination:!1,bordered:""},scopedSlots:e._u([e._l(["itemText","itemValue"],(function(a,o){return{key:a,fn:function(r,l){return[l.editable?t("a-input",{key:a,staticStyle:{margin:"-5px 0"},attrs:{value:r,placeholder:e.columns[o].title},on:{change:function(t){return e.handleChange(t.target.value,l.key,a)}}}):[e._v(e._s(r))]]}}})),{key:"operation",fn:function(a,o){return[o.editable?[o.isNew?t("span",[t("a",{on:{click:function(a){return e.saveRow(o.key)}}},[e._v("添加")]),t("a-divider",{attrs:{type:"vertical"}}),t("a-popconfirm",{attrs:{title:"是否要删除此行?"},on:{confirm:function(a){return e.remove(o.key)}}},[t("a",[e._v("删除")])])],1):t("span",[t("a",{on:{click:function(a){return e.saveRow(o.key)}}},[e._v("保存")]),t("a-divider",{attrs:{type:"vertical"}}),t("a",{on:{click:function(a){return e.cancle(o.key)}}},[e._v("取消")])],1)]:t("span",[t("a",{on:{click:function(a){return e.toggle(o.key)}}},[e._v("编辑")]),t("a-divider",{attrs:{type:"vertical"}}),t("a-popconfirm",{attrs:{title:"是否要删除此行?"},on:{confirm:function(a){return e.remove(o.key)}}},[t("a",[e._v("删除")])])],1)]}}],null,!0)})],1)}),i=[],s=(t("4de4"),t("2909")),n=[{title:"选项",dataIndex:"itemText",key:"itemText",scopedSlots:{customRender:"itemText"}},{title:"编码",dataIndex:"itemValue",key:"itemValue",scopedSlots:{customRender:"itemValue"}},{title:"操作",key:"operation",scopedSlots:{customRender:"operation"}}],u=[],c={data:function(){return{columns:n,dataSource:u}},computed:{},methods:{newMember:function(){this.dataSource.push({key:this.dataSource.length+1,itemText:"",itemValue:"",editable:!0,isNew:!0})},handleChange:function(e,a,t){var o=Object(s["a"])(this.dataSource),r=o.filter((function(e){return a===e.key}))[0];r&&(r[t]=e,this.dataSource=o)},remove:function(e){var a=this.dataSource.filter((function(a){return a.key!==e}));console.log(a),this.dataSource=a},saveRow:function(e){var a=this.dataSource.filter((function(a){return a.key===e}))[0];a.editable=!1,a.isNew=!1,console.log(a)},cancle:function(e){var a=this.dataSource.filter((function(a){return a.key===e}))[0];a.editable=!1},toggle:function(e){var a=this.dataSource.filter((function(a){return a.key===e}))[0];a.editable=!a.editable}}},d=c,m=t("0c7c"),p=Object(m["a"])(d,l,i,!1,null,null,null),f=p.exports,h=t("dde5"),v=[{id:"jia",formId:"jia",formItem:{type:"input",collection:null},label:"子设备协议参数甲",decoratorOptions:{rules:[{required:!0}],initialValue:"甲"},display:!0,exist:!0,formItemLayout:{labelCol:{span:6},wrapperCol:{span:18}}},{id:"yi",formId:"yi",formItem:{type:"input",collection:null},label:"子设备协议参数乙",decoratorOptions:{rules:[{required:!0}],initialValue:"乙"},display:!0,exist:!0,formItemLayout:{labelCol:{span:6},wrapperCol:{span:18}}},{id:"bing",formId:"bing",formItem:{type:"radioButton",collection:"LINE_STATUS"},label:"子设备协议参数丙",decoratorOptions:{rules:[{required:!1,message:"请选择对应组织类型"}],initialValue:"1"},display:!0,exist:!0,formItemLayout:{labelCol:{span:6},wrapperCol:{span:18}}},{id:"ding",formId:"ding",formItem:{type:"radioGroup",collection:"LINE_STATUS"},label:"子设备协议参数丁",decoratorOptions:{rules:[{required:!1,message:"请选择对应组织类型"}],initialValue:"1"},display:!0,exist:!0,formItemLayout:{labelCol:{span:6},wrapperCol:{span:18}}}],w={components:{ProGroupEdit:f},data:function(){return{form:this.$form.createForm(this,{}),formItemLayout:{labelCol:{span:6},wrapperCol:{span:18}},showGroupEdit:!1,dataItemName:"自定义数据格式",showGate:!1,isSub:!0,showItem:!1,proId:this.$route.query.id,editType:"1",formData:{},simpleShowSlot:["areaValue"],formNormalShowSettings:v,subProtoList:[]}},mounted:function(){console.log("添加新值"+this.proId),this.editType=this.proId?"2":"1","2"===this.editType&&this.queryProDuctInfo(this.proId)},methods:{onChange:function(){},handleChange:function(){},queryProDuctInfo:function(e){var a=this;h["f"].queryProductInfo({id:e}).then((function(e){var t=e.data;t.enableFlag="1"==t.enableFlag,a.form.setFieldsValue(t),"3"===t.nodeType?(a.isSub=!1,a.showItem=!0,a.dataItemName="子设备协议名称",a.querySubdeviceList(),a.form.setFieldsValue({dataformatProtocolId:Number(t.dataformatProtocolId)})):"2"===t.nodeType&&(a.showGate=!0),"2"===t.dataformatType&&(a.showItem=!0)}))},onNodeChange:function(e){"3"==e.target.value?(this.showGate=!1,this.isSub=!1,this.showItem=!0,this.dataItemName="子设备协议名称",this.querySubdeviceList()):("2"==e.target.value?this.showGate=!0:this.showGate=!1,this.isSub=!0,"2"==this.form.getFieldsValue().dataformatType?this.showItem=!0:this.showItem=!1,this.dataItemName="自定义数据格式")},querySubdeviceList:function(){var e=this;h["a"].querySubDeviceProto({enableFlag:"1"}).then((function(a){var t=a.data;e.subProtoList=t.data.pageBean.list}))},onFormatChange:function(e){"3"!=this.form.getFieldsValue().nodeType?"2"==e.target.value?this.showItem=!0:this.showItem=!1:this.showItem=!0},paramModeAdd:function(){this.showEditProduct=!0},ok:function(){},cancel:function(){this.showEditProduct=!1},editGroup:function(){this.showGroupEdit=!0},handleOk:function(){},handleCancel:function(){this.showGroupEdit=!1},saveForm:function(){var e=this,a=this.form.getFieldsValue();a.enableFlag=a.enableFlag?"1":"0",a.id=this.proId?this.proId:null,console.log(a),this.form.validateFields((function(t,o){t||h["f"].saveProduct(a).then((function(a){var t=a.data;console.log(t.data.result),t.serviceSuccess?(e.$message.success("保存成功"),e.$router.push({path:"/device/produceMg/produceList",query:{}})):e.$message.error("保存失败")}))}))},resetForm:function(){this.form.resetFields()}}},b=w,y=(t("6014"),Object(m["a"])(b,o,r,!1,null,"4ff43ada",null));a["default"]=y.exports}}]);