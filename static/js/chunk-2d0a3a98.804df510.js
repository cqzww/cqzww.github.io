(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a3a98"],{"02aa":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-card",[a("a-form",{attrs:{layout:"horizontal"}},[a("div",[a("a-row",[a("a-col",{attrs:{md:8,sm:24}},[a("h4",{staticStyle:{"font-weight":"bold"}},[e._v("子设备")])]),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"设备名称",labelCol:{span:5},wrapperCol:{span:15,offset:1}}},[a("a-input",{attrs:{placeholder:"请输入",allowClear:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.query()}},model:{value:e.form.deviceName,callback:function(t){e.$set(e.form,"deviceName",t)},expression:"form.deviceName"}})],1)],1),a("a-col",{staticStyle:{"margin-top":"3px"},attrs:{md:8,sm:24}},[a("a-button",{style:{marginRight:"8px"},attrs:{type:"primary"},on:{click:function(t){return e.query()}}},[e._v("查询")]),a("a-button",{style:{marginRight:"8px"},on:{click:function(t){return e.resetForm()}}},[e._v("重置")]),a("a-button",{attrs:{type:"danger"},on:{click:function(t){return e.add()}}},[e._v("添加")])],1)],1)],1)]),a("a-table",{attrs:{rowKey:function(e){return e.id},columns:e.dataColumns,dataSource:e.dataSource,pagination:!1},scopedSlots:e._u([{key:"enableFlag",fn:function(t,n){return a("span",{},[a("a-switch",{attrs:{checked:1==t},on:{change:function(t){return e.onChangeSwitch(n)}}})],1)}},{key:"action",fn:function(t,n){return[a("div",{staticClass:"editable-row-operations"},[a("a",{style:{marginRight:"8px"},on:{click:function(){return e.view(n)}}},[e._v("查看")]),a("a",{style:{marginRight:"8px"},on:{click:function(){return e.edit(n)}}},[e._v("编辑")]),a("a-popconfirm",{attrs:{title:"是否确定删除该记录？","ok-text":"确定","cancel-text":"取消"},on:{confirm:function(t){return e.deleteRecord(n)}}},[a("a",{attrs:{href:"#"}},[e._v("删除")])])],1)]}}])}),a("a-pagination",{ref:"gridPager",staticStyle:{float:"right","margin-top":"10px"},attrs:{"show-total":function(e){return"总数："+e+" 条"},showSizeChanger:"",showQuickJumper:"",total:e.total,defaultPageSize:10,current:e.pageNumber},on:{change:e.changePage}})],1)],1)},i=[],r=(a("b0c0"),a("dde5")),o=[{title:"设备名称",dataIndex:"deviceName"},{title:"设备Id",dataIndex:"deviceId"},{title:"产品",dataIndex:"productName"},{title:"启用/停用",dataIndex:"enableFlag",scopedSlots:{customRender:"enableFlag"}},{title:"激活状态",dataIndex:"activatedFlag"},{title:"在线状态",dataIndex:"onlineFlag"},{title:"最近上线/通讯时间",dataIndex:"lastonline"},{title:"操作",dataIndex:"action",align:"center",scopedSlots:{customRender:"action"}}],c={data:function(){return{gatewayId:this.$route.query.id,gatewayName:this.$route.query.name,form:{},dataSource:[],dataColumns:o,total:0,pageNumber:1,pageSize:10}},activated:function(){console.log("网关："+this.gatewayId),this.query()},methods:{changePage:function(e,t){this.pageNumber=e,this.pageSize=t,this.query()},query:function(){var e=this,t=this.form;t.gatewayId=this.gatewayId,r["a"].querySubdevice(t).then((function(t){var a=t.data;a.serviceSuccess&&(e.dataSource=a.data.pageBean.list,e.total=a.data.pageBean.total>0?a.data.pageBean.total:e.total)}))},resetForm:function(){this.form={},this.query()},add:function(){this.$router.push({path:"/device/deviceMg/subDeviceEdit",query:{gatewayId:this.gatewayId,editType:"1"}})},view:function(e){this.$router.push({path:"/device/deviceMg/subDeviceInfo",query:{id:e.id,gatewayId:this.gatewayId}})},edit:function(e){this.$router.push({path:"/device/deviceMg/subDeviceEdit",query:{id:e.id,gatewayId:this.gatewayId,editType:"2"}})},deleteRecord:function(e){var t=this;r["a"].deleteSubdevice({id:e.id,delFlag:"1"}).then((function(e){var a=e.data;a.serviceSuccess?(t.$message.success("删除成功"),t.changePage(1,10)):t.$message.success("删除失败")}))}}},d=c,s=a("0c7c"),u=Object(s["a"])(d,n,i,!1,null,"0eb2657f",null);t["default"]=u.exports}}]);