(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4882e0db"],{"32b4":function(e,a,r){"use strict";var t=r("4046"),o=r.n(t);o.a},4046:function(e,a,r){},c2e7:function(e,a,r){"use strict";r.r(a);var t=function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("div",[r("a-card",{attrs:{title:1==e.editType?"驱动实例添加":"驱动实例编辑"}},[r("a-form",{attrs:{form:e.form,layout:"horizontal"}},[r("a-row",[r("a-col",{attrs:{span:16}},[r("a-form-item",{attrs:{label:"实例名称",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["instanceName",{rules:[{required:!0,message:"请输入实例名称"}]}],expression:"[\n                'instanceName',\n                { rules: [{ required: true, message: '请输入实例名称' }] },\n              ]"}],attrs:{disabled:"",placeholder:"请输入"}})],1)],1)],1),r("a-row",[r("a-col",{attrs:{span:16}},[r("a-form-item",{attrs:{label:"标识符",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["instanceTag",{rules:[{required:!0,message:"请输入驱动标识符"}]}],expression:"[\n                'instanceTag',\n                { rules: [{ required: true, message: '请输入驱动标识符' }] },\n              ]"}],attrs:{disabled:"",placeholder:"请输入"}})],1)],1)],1),r("a-row",[r("a-col",{attrs:{span:16}},[r("a-form-item",{attrs:{label:"所属网关",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["gatewayName",{rules:[{required:!0,message:"请输入网关"}]}],expression:"[\n                'gatewayName',\n                { rules: [{ required: true, message: '请输入网关' }] },\n              ]"}],attrs:{disabled:""}})],1)],1)],1),r("a-row",[r("a-col",{attrs:{span:16}},[r("a-form-item",{attrs:{label:"所属驱动",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["driverName",{rules:[{required:!0,message:"请选择所属驱动"}]}],expression:"[\n                'driverName',\n                { rules: [{ required: true, message: '请选择所属驱动' }] },\n              ]"}],attrs:{disabled:"",placeholder:"请选择"},on:{change:e.changeDrive}},e._l(e.driveList,(function(a){return r("a-select-option",{key:a.id,attrs:{value:JSON.stringify(a)}},[e._v(" "+e._s(a.driverName)+"_"+e._s(a.driverId)+" ")])})),1)],1)],1)],1),r("a-row",[r("a-col",{attrs:{span:16}},[r("a-form-item",{attrs:{label:"所属驱动版本",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["driverVersion",{rules:[{required:!0,message:"请选择所属驱动版本"}]}],expression:"[\n                'driverVersion',\n                {\n                  rules: [{ required: true, message: '请选择所属驱动版本' }],\n                },\n              ]"}],attrs:{disabled:"",placeholder:"请选择"},on:{change:e.changeVersion}},e._l(e.versionList,(function(a){return r("a-select-option",{key:a.id,attrs:{disabled:"",value:JSON.stringify(a)}},[e._v(" "+e._s(a.driverVersion)+" ")])})),1)],1)],1)],1),r("a-row",[r("a-col",{attrs:{span:16}},[r("a-form-item",{attrs:{label:"工作模式",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["groupName",{rules:[{required:!0,message:"请选择工作模式"}]}],expression:"[\n                'groupName',\n                { rules: [{ required: true, message: '请选择工作模式' }] },\n              ]"}],attrs:{disabled:"",placeholder:"请选择"},on:{change:e.changeGroup}},e._l(e.groupList,(function(a){return r("a-select-option",{key:a.id,attrs:{value:JSON.stringify(a)}},[e._v(" "+e._s(a.groupName)+" ")])})),1)],1)],1)],1),r("div",[r("a-row",e._l(e.paramList,(function(a){return r("a-col",{key:a.id,attrs:{span:16}},[r("a-form-item",{attrs:{label:a.label,labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[1==a.dataType||2==a.dataType||3==a.dataType||6==a.dataType?r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:[a.tag,{rules:[{required:a.flag,message:"请输入"+a.label}]}],expression:"[\n                  data.tag,\n                  {\n                    rules: [\n                      { required: data.flag, message: '请输入' + data.label },\n                    ],\n                  },\n                ]"}],attrs:{disabled:"",placeholder:e.caseStr(a.dataType)}}):4==a.dataType?r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:[a.tag,{rules:[{required:a.flag,message:"请输入"+a.label}]}],expression:"[\n                  data.tag,\n                  {\n                    rules: [\n                      { required: data.flag, message: '请输入' + data.label },\n                    ],\n                  },\n                ]"}],attrs:{disabled:"",placeholder:"请选择"}},[e._l(a.json,(function(a,t){return[r("a-select-option",{key:t,attrs:{value:a.value}},[e._v(" "+e._s(a.desc)+"_"+e._s(a.value)+" ")])]}))],2):5==a.dataType?r("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:[a.tag,{rules:[{required:a.flag,message:"请输入"+a.label}]}],expression:"[\n                  data.tag,\n                  {\n                    rules: [\n                      { required: data.flag, message: '请输入' + data.label },\n                    ],\n                  },\n                ]"}],attrs:{disabled:""}},[r("a-radio",{attrs:{value:"1"}},[e._v(e._s(a.json.trueValue))]),r("a-radio",{attrs:{value:"0"}},[e._v(e._s(a.json.falseValue))])],1):7==a.dataType?r("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:[a.tag,{rules:[{required:a.flag,message:"请输入"+a.label}]}],expression:"[\n                  data.tag,\n                  {\n                    rules: [\n                      { required: data.flag, message: '请输入' + data.label },\n                    ],\n                  },\n                ]"}],staticStyle:{width:"300px"},attrs:{disabled:"",format:"YYYY-MM-DD HH:mm:ss","show-time":""}}):e._e()],1)],1)})),1)],1),r("a-row",[r("a-col",{attrs:{span:16}},[r("a-form-item",{attrs:{label:"启动/停用",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[r("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["enableFlag",{valuePropName:"checked",rules:[{required:!0,message:"请选择"}],initialValue:!0}],expression:"[\n                'enableFlag',\n                {\n                  valuePropName: 'checked',\n                  rules: [{ required: true, message: '请选择' }],\n                  initialValue: true,\n                },\n              ]"}],attrs:{disabled:""}})],1)],1)],1)],1)],1)],1)},o=[],s=(r("4160"),r("b0c0"),r("159b"),r("dde5")),i={data:function(){return{gatewayId:this.$route.query.id,gatewayName:this.$route.query.name,editType:this.$route.query.editType,instanceId:this.$route.query.instanceId,formItemLayout:{labelCol:{span:6},wrapperCol:{span:18}},form:this.$form.createForm(this,{}),driverId:"",driverVersion:"",groupCode:"",driveList:[],oldDriveList:[],versionList:[],groupList:[],oldGroupList:[],paramList:[]}},mounted:function(){this.queryDriveConfInfo(),this.queryDriveBygatewayId(this.gatewayId)},methods:{changeDrive:function(e){var a=this,r=JSON.parse(e);this.versionList=[],this.oldDriveList.forEach((function(e){e.driverId===r.driverId&&a.versionList.push(e)}))},changeVersion:function(e){var a=this,r=JSON.parse(e);this.driverId=r.id,this.driverVersion=r.driverVersion;var t={driverId:r.id,paramType:21};s["e"].queryParam(t).then((function(e){var r=e.data;a.oldGroupList=r.data.pageBean.list,a.groupList=a.distinctGroupCode(a.oldGroupList)}))},changeGroup:function(e){var a=this,r=JSON.parse(e);this.groupCode=r.groupCode,this.paramList=[],this.oldGroupList.forEach((function(e){if(e.groupCode===r.groupCode){var t=JSON.parse(e.dataJson);"4"===e.dataType&&(t=JSON.parse(e.dataJson).list),a.paramList.push({id:a.paramList.length+1,label:e.paramName,dataType:e.dataType,tag:e.paramTag,flag:"1"===e.propertyFlag,json:t})}}))},distinctGroupCode:function(e){for(var a=[],r={},t=0;t<e.length;t++)r[e[t].groupCode]||(a.push(e[t]),r[e[t].groupCode]=!0);return a},distinctTag:function(e){for(var a=[],r={},t=0;t<e.length;t++)r[e[t].driverId]||(a.push(e[t]),r[e[t].driverId]=!0);return a},queryDriveBygatewayId:function(e){var a=this;s["c"].queryDriveBygatewayId({gatewayId:e}).then((function(e){var r=e.data;a.oldDriveList=r,a.driveList=a.distinctTag(r)}))},caseStr:function(e){return"1"===e?e="int型数据":"2"===e?e="float型数据":"3"===e?e="double型数据":"6"===e&&(e="text型数据"),"请输入"+e},queryDriveConfInfo:function(){var e=this;s["c"].queryDriveConf({id:this.instanceId}).then((function(a){var r=a.data,t=r.data.pageBean.list[0];e.changeDrive(JSON.stringify({id:t.driverId,driverId:t.driverTag})),e.changeVersion(JSON.stringify({id:t.driverId,driverVersion:t.driverVersion})),setTimeout((function(){e.changeGroup(JSON.stringify({groupCode:t.groupCode}))}),300),t.gatewayName=t.deviceName,e.driverId=t.driverId,e.driverVersion=t.driverVersion,e.groupCode=t.groupCode,t.driverName=t.driverName+"_"+t.driverTag,t.enableFlag="1"==t.enableFlag,e.form.setFieldsValue(t),e.dyncInit(t.dataJson)}))},dyncInit:function(e){var a=this,r=JSON.parse(e),t={};for(var o in r)t[o]=r[o];setTimeout((function(){a.form.setFieldsValue(t)}),300)}}},n=i,l=(r("32b4"),r("0c7c")),d=Object(l["a"])(n,t,o,!1,null,"7c375f28",null);a["default"]=d.exports}}]);