(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f7dd5a4"],{"7e7b":function(t,e,s){"use strict";var i=s("9621"),a=s.n(i);a.a},9621:function(t,e,s){},ae7c:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.show?s("dict-show",{attrs:{rowData:t.rowData},on:{funcBack:t.backDict}}):s("dict-mg",{on:{funcShow:t.showDictDetail}})],1)},a=[],o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"page",staticClass:"fit",attrs:{id:"publicRoleManager"}},[s("ts-border-layout",{attrs:{layout:{footer:"70px"},centerCfg:{showBar:!0,toolBarStyle:{height:"50px",lineHeight:"70px"}},"footer-cfg":{showBorder:!1}}},[s("div",{class:["center-box",t.layout,t.pageWidth],attrs:{slot:"header"},slot:"header"},[s("div",{staticClass:"search-input"},[s("a-input-search",{staticClass:"search-ipt",staticStyle:{width:"500px"},attrs:{placeholder:"根据字典名称、字典类型",enterButton:"搜索"},on:{search:t.queryDictType},model:{value:t.typeInfo,callback:function(e){t.typeInfo=e},expression:"typeInfo"}})],1)]),s("div",{attrs:{slot:"centerExtraContent"},slot:"centerExtraContent"},[s("div",{staticStyle:{float:"right"}},[s("a-space",[s("a-button",{attrs:{type:"primary"},on:{click:t.fnToAddDictType}},[t._v("新增类型")]),s("a-dropdown",[s("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[s("a-menu-item",{attrs:{disabled:t.btnDisable}},[s("a-popconfirm",{attrs:{title:"确认启用所选字典类型?",cancelText:"取消",okText:"确认"},on:{confirm:function(e){return t.fnStartDictByTypes(!1)}}},[s("a-icon",{attrs:{type:"check-circle"}}),s("span",{staticClass:"mg-l12"},[t._v("启用")])],1)],1),s("a-menu-divider"),s("a-menu-item",{attrs:{disabled:t.btnDisable}},[s("a-popconfirm",{attrs:{title:"确认禁用所选字典类型?",cancelText:"取消",okText:"确认"},on:{confirm:function(e){return t.fnStopDictByTypes(!1)}}},[s("a-icon",{attrs:{type:"stop"}}),s("span",{staticClass:"mg-l12"},[t._v("禁用")])],1)],1)],1),s("a-button",[t._v(" 批量操作 "),s("a-icon",{attrs:{type:"down"}})],1)],1),s("a-button",{on:{click:t.fnRefreshCaches}},[t._v("刷新缓存")])],1)],1)]),s("a-table",{attrs:{rowKey:function(t){return t.name+t.dictNum},columns:t.dictTypeColumns,dataSource:t.typeGridData,pagination:!1,rowSelection:{selectedRowKeys:t.selectedRowKeys,onChange:t.fnOnChange}},scopedSlots:t._u([{key:"authority",fn:function(e){return s("span",{},[t._v(t._s("0"!=e?e:"默认"))])}},{key:"system",fn:function(e){return s("span",{},[t._v(t._s(t.CollectionLabel("YESORNO",e)))])}}])},[s("span",{attrs:{slot:"action"},slot:"action"},[s("ts-table-operate",{attrs:{operateMenu:t.operateMenu}})],1)]),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("a-pagination",{ref:"gridPager",staticStyle:{float:"right","margin-top":"10px"},attrs:{"show-total":function(t){return"总数："+t+" 条"},showSizeChanger:"",showQuickJumper:"",total:t.total,defaultPageSize:10,current:t.pageNumber},on:{change:t.changeDictType}})],1)],1),s("a-drawer",{attrs:{destroyOnClose:!0,"wrap-style":{position:"fixed",top:"0px",right:"0px"},"drawer-style":{paddingBottom:"150px"},title:"新增字典类型",width:"500",placement:"right",closable:"",visible:t.typeDrawerVisible},on:{close:t.fnTypeDrawCloseEvent}},[s("system-dict-type-mg",{ref:"sysDictTypeMgChild",on:{saveTypeSuccess:t.saveTypeSuccess,closeSystemDictMgDrawer:t.fnTypeDrawCloseEvent}}),s("div",{staticClass:"drawer-footer"},[s("a-button-group",[s("a-button",{on:{click:t.resetTypeForm}},[t._v("重置")]),s("a-button",{attrs:{type:"primary"},on:{click:t.saveType}},[t._v("保存")])],1)],1)],1),s("a-drawer",{attrs:{destroyOnClose:"",title:"新增字典",width:"500",placement:"right",closable:"",footerHeight:"",visible:t.dictAddOrEditVisible},on:{close:t.fnDictAddOrEditDrawerClose}},[s("div",{staticClass:"drawer-footer"},[s("a-button-group",[s("a-button",{on:{click:t.resetForm}},[t._v("重置")]),s("a-button",{attrs:{type:"primary"},on:{click:t.saveDict}},[t._v("保存")])],1)],1),s("system-dict-mg",{ref:"sysDictMgChild",attrs:{dict:t.dict},on:{closeSystemDictMgDrawer:t.fnDictAddOrEditDrawerClose}})],1)],1)},r=[],n=(s("a15b"),s("d81d"),s("b0c0"),s("5530")),c=s("2f62"),l=s("0a54"),u=s("d2ec"),d=s("976e"),y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a-form",{attrs:{form:t.form}},[s("a-form-item",{attrs:{label:"字典类型",labelCol:t.formItemLayout.labelCol,wrapperCol:t.formItemLayout.wrapperCol,fieldDecoratorId:"type"}},[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{rules:[{required:!0,message:"请输入字典类型"}]}],expression:"[\n        'type',\n        { rules: [{ required: true, message: '请输入字典类型' }] },\n      ]"}]})],1),s("a-form-item",{attrs:{label:"字典名称",labelCol:t.formItemLayout.labelCol,wrapperCol:t.formItemLayout.wrapperCol,fieldDecoratorId:"name"}},[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入字典名称"}]}],expression:"[\n        'name',\n        { rules: [{ required: true, message: '请输入字典名称' }] },\n      ]"}]})],1),s("a-form-item",{attrs:{label:"权限标识",labelCol:t.formItemLayout.labelCol,wrapperCol:t.formItemLayout.wrapperCol,fieldDecoratorId:"authority"}},[s("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["authority",{rules:[{required:!1,message:"请选择所属权限标识"}]}],expression:"[\n        'authority',\n        { rules: [{ required: false, message: '请选择所属权限标识' }] },\n      ]"}],attrs:{placeholder:"请选择权限标识"}},t._l(t.authorityList,(function(e){return s("a-select-option",{key:e.value},[t._v(t._s(e.label))])})),1)],1)],1)},p=[],f=s("dde5"),h={labelCol:{span:6},wrapperCol:{span:18}},m={name:"systemDictMg",data:function(){return{form:this.$form.createForm(this,{}),formItemLayout:h,authorityList:[],typeFormData:{type:"",name:"",authority:""}}},mounted:function(){this.queryDictAuthorityList(),this.form.setFieldsValue({type:this.typeFormData.type,name:this.typeFormData.name,authority:this.typeFormData.authority})},methods:{queryDictAuthorityList:function(){var t=this;f["b"].queryDictAuthorityList({}).then((function(e){var s=e.data;t.authorityList=s.data.list}))},saveType:function(){var t=this,e=this.form.getFieldsValue();this.form.validateFields((function(s,i){s||f["b"].saveType(e).then((function(e){var s=e.data;s.serviceSuccess&&(t.$message.success("新增类型成功！"),t.$emit("saveTypeSuccess"))}))}))},resetForm:function(){this.form.resetFields()}}},w=m,D=s("0c7c"),v=Object(D["a"])(w,y,p,!1,null,null,null),g=v.exports,b=[{title:"字典名称",dataIndex:"name",key:"name",width:"25%",overflowTooltip:!0},{title:"字典类型",dataIndex:"type",key:"type",width:"30%",overflowTooltip:!0},{title:"权限标识",dataIndex:"authority",width:"10%",scopedSlots:{customRender:"authority"}},{title:"系统字典",dataIndex:"system",scopedSlots:{customRender:"system"},width:"10%"},{title:"操作",dataIndex:"typeAction",align:"center",scopedSlots:{customRender:"action"},width:"20%"}],T={labelCol:{span:6},wrapperCol:{span:18}},C={name:"SearchLayout",computed:Object(n["a"])(Object(n["a"])({},Object(c["d"])("setting",["layout","pageWidth"])),{},{btnDisable:function(){return!this.selectedRowKeys.length}}),components:{TsBorderLayout:l["a"],TsTableOperate:u["a"],systemDictMg:d["a"],systemDictTypeMg:g},data:function(){var t=this;return{formItemLayout:T,dictTypeColumns:b,typeGridData:[],typeInfo:"",typeDrawerVisible:!1,selectedRowKeys:[],selectedRows:[],deleteVisible:!1,authorityList:[],pageNumber:1,pageSize:10,total:0,keyJoin:".",operateMenu:[{name:"新增字典",disabled:function(t){return"0"==t.system},title:function(t){return"0"==t.system?"存在系统字典，不能新增字典!":""},onClick:function(e){t.fnToAddDictByType(e)}},{name:"查看",onClick:function(e){t.fnRouteToDictTypeMg(e)}},{name:"更多",type:"more",moreMenuList:[{name:"启用",type:"confirm",confirmTitle:"确认启用该字典类型?",onOk:function(e){t.fnStartDictByTypes(e)},title:function(t){return"0"==t.system?"存在系统字典不能启用!":""},disabled:function(t){return"0"==t.system}},{name:"禁用",type:"confirm",confirmTitle:"确认禁用该字典类型?",title:function(t){return"0"==t.system?"存在系统字典不能禁用!":""},onOk:function(e){t.fnStopDictByTypes(e)},disabled:function(t){return"0"==t.system}},{name:"删除",type:"confirm",confirmTitle:"确定删除该字典类型?",onOk:function(e){t.fnDeleteDictByType(e)},title:function(t){return"0"==t.system?"存在系统字典不能删除!":""},disabled:function(t){return"0"==t.system}}]}],operateType:"",dictNameDisable:!1,dictAddOrEditVisible:!1,dict:{},dictContentModal:!1}},mounted:function(){this.queryDictType()},methods:{keyFunc:function(t){return t.name+t.dictNum},changeDictType:function(t,e){this.pageNumber=t,this.pageSize=e,this.queryDictType()},queryDictType:function(){var t=this;this.selectedRowKeys=[],this.selectedRows=[];var e={typeInfo:this.typeInfo,pageSize:this.pageSize,pageNumber:this.pageNumber};f["b"].queryType(e).then((function(e){var s=e.data;s.serviceSuccess&&(t.typeGridData=s.data.pageBean.list,t.total=s.data.pageBean.total>0?s.data.pageBean.total:t.total)}))},fnOnChange:function(t,e){this.selectedRowKeys=t,this.selectedRows=e},fnToAddDictType:function(){this.typeDrawerVisible=!0},fnTypeDrawCloseEvent:function(t){this.typeDrawerVisible=!1},saveType:function(){this.$refs.sysDictTypeMgChild.saveType()},resetTypeForm:function(){this.$refs.sysDictTypeMgChild.resetForm()},saveTypeSuccess:function(){this.queryDictType(),this.typeDrawerVisible=!1},fnStartDictByTypes:function(t){var e,s,i=this;if(t)s={keys:t.type+"."+t.authority};else{for(var a=0;a<this.selectedRows.length;a++)if("0"==this.selectedRows[a].system)return void this.$message.warning("存在非系统字典，不能进行批量启用操作！");e=this.selectedRows.map((function(t){return t.type+"."+t.authority})),s={keys:e.join(",")}}f["b"].startDictByType(s).then((function(t){var e=t.data;e.serviceSuccess&&(i.$message.success("启用数据成功"),i.selectedRows=[],i.queryDictType())}))},fnStopDictByTypes:function(t){var e,s,i=this;if(t)s={keys:t.type+"."+t.authority};else{for(var a=0;a<this.selectedRows.length;a++)if("0"==this.selectedRows[a].system)return void this.$message.warning("存在非系统字典，不能进行批量启用操作！");e=this.selectedRows.map((function(t){return t.type+"."+t.authority})),s={keys:e.join(",")}}f["b"].stopDictByType(s).then((function(t){var e=t.data;e.serviceSuccess&&(i.$message.success("禁用数据成功"),i.selectedRows=[],i.queryDictType())}))},fnToAddDictByType:function(t){this.dict=t,this.dict.drawerType="add",this.dictAddOrEditVisible=!0},queryDictByType:function(t){this.dict=t,this.dictContentModal=!0},fnDeleteDictByType:function(t){var e=this,s=t.type+this.keyJoin+t.authority;f["b"].deleteDictByType({keys:s}).then((function(t){var s=t.data;s.serviceSuccess&&(e.$message.success("删除成功！"),e.queryDictType())}))},fnDeleteDictByTypes:function(){for(var t=this,e=0;e<this.selectedRows.length;e++)if("0"==this.selectedRows[e].system)return void this.$message.warning("存在非系统字典，不能进行批量删除操作！");var s=this.selectedRows.map((function(t){return t.type+"."+t.authority})),i={keys:s.join(",")};f["b"].deleteDictByType(i).then((function(e){var s=e.data;s.serviceSuccess&&(t.$message.success("删除数据成功"),t.selectedRows=[],t.deleteVisible=!1,t.queryDictType())}))},fnRefreshCaches:function(){var t=this;if(0!=this.selectedRows.length){var e=this.selectedRows.map((function(t){return t.type+"."+t.authority})),s={keys:e.join(",")};f["b"].refreshDictCacheByType(s).then((function(e){var s=e.data;s.serviceSuccess&&(t.$message.success("同步成功！"),t.queryDictType())}))}else this.$message.warning("请选择需要同步缓存的字典类型！")},fnRouteToDictTypeMg:function(t){this.$emit("funcShow",t)},fnDictAddOrEditDrawerClose:function(){this.operateType="",this.dictNameDisable=!1,this.dictAddOrEditVisible=!1},resetForm:function(){this.$refs.sysDictMgChild.resetForm()},saveDict:function(){this.$refs.sysDictMgChild.saveDict()},deleteMore:function(){this.deleteVisible=!0}}},S=C,k=(s("7e7b"),Object(D["a"])(S,o,r,!1,null,"9bf3699c",null)),R=k.exports,x=s("0338"),B={components:{dictMg:R,dictShow:x["default"]},data:function(){return{show:!1,rowData:{}}},methods:{showDictDetail:function(t){this.show=!0,this.rowData=t},backDict:function(){this.show=!1,this.rowData={}}}},O=B,_=Object(D["a"])(O,i,a,!1,null,null,null);e["default"]=_.exports}}]);