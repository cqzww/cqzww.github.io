(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d0199"],{6713:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-card",[a("a-form",{attrs:{layout:"horizontal"}},[a("div",[a("a-row",[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"驱动名称",labelCol:{span:5},wrapperCol:{span:15,offset:1}}},[a("a-input",{attrs:{allowClear:"",placeholder:"请输入"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.query()}},model:{value:e.form.driverName,callback:function(t){e.$set(e.form,"driverName",t)},expression:"form.driverName"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"版本",labelCol:{span:5},wrapperCol:{span:15,offset:1}}},[a("a-input",{attrs:{allowClear:"",placeholder:"请输入"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.query()}},model:{value:e.form.driverVersion,callback:function(t){e.$set(e.form,"driverVersion",t)},expression:"form.driverVersion"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"启用/停用",labelCol:{span:5},wrapperCol:{span:15,offset:1}}},[a("a-select",{attrs:{placeholder:"请选择"},model:{value:e.form.enableFlag,callback:function(t){e.$set(e.form,"enableFlag",t)},expression:"form.enableFlag"}},[a("a-select-option",{attrs:{value:"1"}},[e._v("启用")]),a("a-select-option",{attrs:{value:"0"}},[e._v("停用")])],1)],1)],1)],1),a("a-row",[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"上传时间范围",labelCol:{span:5},wrapperCol:{span:15,offset:1}}},[a("a-range-picker",{on:{change:e.onChange},model:{value:e.timeEl,callback:function(t){e.timeEl=t},expression:"timeEl"}})],1)],1)],1)],1),a("span",{staticStyle:{float:"left","margin-top":"3px"}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.query()}}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){return e.resetForm()}}},[e._v("重置")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"danger"},on:{click:e.addDrive}},[e._v("添加")])],1)]),a("div",{staticStyle:{"margin-top":"45px"}},[a("a-table",{attrs:{rowKey:function(e){return e.id},columns:e.dataColumns,dataSource:e.dataSource,pagination:!1},scopedSlots:e._u([{key:"enableFlag",fn:function(t,r){return a("span",{},[a("a-switch",{attrs:{checked:1==t},on:{change:function(t){return e.onChangeSwitch(r)}}})],1)}},{key:"action",fn:function(t,r){return[a("div",{staticClass:"editable-row-operations"},[a("a",{style:{marginRight:"8px"},on:{click:function(){return e.view(r)}}},[e._v("查看")]),a("a",{style:{marginRight:"8px"},on:{click:function(){return e.edit(r)}}},[e._v("编辑")]),a("a",{style:{marginRight:"8px"},on:{click:function(){return e.newVersion(r)}}},[e._v("新增版本")]),a("a-popconfirm",{style:{marginRight:"8px"},attrs:{title:"是否确定删除该记录？","ok-text":"确定","cancel-text":"取消"},on:{confirm:function(t){return e.deleteRecord(r)}}},[a("a",{attrs:{href:"#"}},[e._v("删除")])]),a("a",{style:{marginRight:"8px"},on:{click:function(){return e.download(r)}}},[e._v("下载")])],1)]}}])}),a("a-pagination",{ref:"gridPager",staticStyle:{float:"right","margin-top":"10px"},attrs:{"show-total":function(e){return"总数："+e+" 条"},showSizeChanger:"",showQuickJumper:"",total:e.total,defaultPageSize:10,current:e.pageNumber},on:{change:e.changePage}})],1)],1)],1)},n=[],o=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("dde5")),i=[{title:"驱动名称",dataIndex:"driverName",key:"driverName",overflowTooltip:!0},{title:"标识符",dataIndex:"driverId",scopedSlots:{customRender:"driverId"}},{title:"版本",dataIndex:"driverVersion"},{title:"最低固件版本",dataIndex:"firmwareVersion"},{title:"启用/停用",dataIndex:"enableFlag",scopedSlots:{customRender:"enableFlag"}},{title:"上传时间",dataIndex:"uploadTime"},{title:"备注",dataIndex:"description"},{title:"驱动包",dataIndex:"jarName"},{title:"操作",dataIndex:"action",align:"center",scopedSlots:{customRender:"action"}}],l={data:function(){return{showDrive:!1,form:{},timeEl:[],dataSource:[],dataColumns:i,total:0,pageNumber:1,pageSize:10}},activated:function(){this.query()},methods:{onChange:function(e,t){this.form.startTime=t[0],this.form.endTime=t[1]},resetForm:function(){this.form={},this.timeEl=[],this.query()},addDrive:function(){this.$router.push({path:"/gateway/driveEdit",query:{editType:"1"}})},query:function(){var e=this,t=this.form;t.pageSize=this.pageSize,t.pageNumber=this.pageNumber,o["c"].queryDriver(t).then((function(t){var a=t.data;a.serviceSuccess&&(e.dataSource=a.data.pageBean.list,e.total=a.data.pageBean.total>0?a.data.pageBean.total:e.total)}))},changePage:function(e,t){this.pageNumber=e,this.pageSize=t,this.query()},view:function(e){this.$router.push({path:"/gateway/driveInfo",query:{id:e.id}})},edit:function(e){this.$router.push({path:"/gateway/driveEdit",query:{id:e.id,editType:"2"}})},newVersion:function(e){this.$router.push({path:"/gateway/driveEdit",query:{id:e.id,editType:"3"}})},deleteRecord:function(e){var t=this;o["c"].deleteDriver({id:e.id,delFlag:"1"}).then((function(e){var a=e.data;a.serviceSuccess?(t.$message.success("删除成功"),t.changePage(1,10)):t.$message.success("删除失败")}))},download:function(e){var t=this;e.jarName?o["c"].downloadFile({name:e.jarName,url:e.jarUrl}).then((function(t){var a=t.data,r=new Blob([a]);if("download"in document.createElement("a")){var n=document.createElement("a");n.download=e.jarName,n.style.display="none",n.href=URL.createObjectURL(r),document.body.appendChild(n),n.click(),URL.revokeObjectURL(n.href),document.body.removeChild(n)}else navigator.msSaveBlob(r,e.jarName)})).catch((function(){t.$message.error("下载失败,请联系管理员")})):this.$message.info("没有文件")}}},s=l,c=a("0c7c"),d=Object(c["a"])(s,r,n,!1,null,"13afe619",null);t["default"]=d.exports}}]);